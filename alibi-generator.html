<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gerador de Álibis - Álibi Digital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    html { scroll-behavior: smooth; }
    
    /* Animações */
    .fade-in {
      animation: fadeIn 0.8s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    
    /* Estilos para conversas de WhatsApp */
    .whatsapp-bg {
      background-color: #e5ddd5;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='600' viewBox='0 0 600 600'%3E%3Cpath fill='%23d1d7db' fill-opacity='0.2' d='M600 325.1v-170.2l-6.2-2.9c-35.9-17.1-76.3-26.3-119.6-26.3-107.5 0-221.6 78-321.8 167.7-100.2 89.9-170.3 204.3-170.3 317.3 0 70.6 43.9 134.5 108.9 177.7l7.6 3.6 175.8-87c34.6 7.1 72.8 7.9 109.7 2.3l6-1.2v-258l-6-2.4c-26.1-10.3-54.6-15.7-83.2-15.7-61.8 0-116.8 30.7-153.2 73.3-36.6 42.7-59.2 101.1-64.2 167h-0.3v96h0.2c0.3 19.3 2.3 38.2 6.5 56.3 4.2 18.3 10.4 35.7 18.3 52.5 7.9 16.7 17.6 32.4 29.9 45.6 12.3 13.4 26.2 25.3 41.8 34.6 14.9 9.0 31.1 16.1 48.8 20.2l6 1.2v-72.6h-0.2c-23.5-7.6-41.5-30.5-41.5-66.8 0-35.4 45.6-66.8 101.8-66.8 56.0 0 101.8 31.4 101.8 66.8 0 34.4-45.8 63.9-101.8 66.8zM301.6 181.8c0 35.5-28.7 64.3-64.2 64.3h-40.9v-128.5h40.9c35.5 0 64.2 28.8 64.2 64.2z'%3E%3C/path%3E%3C/svg%3E");
    }

    .message {
      border-radius: 7.5px;
      position: relative;
      margin-bottom: 12px;
      padding: 10px;
      max-width: 80%;
    }

    .message.received {
      background: white;
      align-self: flex-start;
    }

    .message.received::before {
      content: "";
      position: absolute;
      top: 0;
      left: -10px;
      width: 0;
      height: 0;
      border-top: 10px solid white;
      border-left: 10px solid transparent;
    }

    .message.sent {
      background: #d9fdd3;
      align-self: flex-end;
    }

    .message.sent::before {
      content: "";
      position: absolute;
      top: 0;
      right: -10px;
      width: 0;
      height: 0;
      border-top: 10px solid #d9fdd3;
      border-right: 10px solid transparent;
    }

    .message-time {
      font-size: 10px;
      color: #8696a0;
      text-align: right;
      margin-top: 2px;
    }
    
    /* Estilos para conversas de Instagram */
    .instagram-header {
      border-bottom: 1px solid #dbdbdb;
    }

    .instagram-chat {
      background-color: white;
    }

    .instagram-message {
      border-radius: 22px;
      padding: 8px 12px;
      margin-bottom: 6px;
      max-width: 70%;
    }

    .instagram-message.received {
      background: #efefef;
      align-self: flex-start;
    }

    .instagram-message.sent {
      background: #3797f0;
      color: white;
      align-self: flex-end;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Cabeçalho -->
  <header class="bg-[#0f172a] text-white shadow-md fixed top-0 left-0 w-full z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <!-- Logo -->
        <a href="/" class="font-bold text-xl">Álibis Digital</a>
      </div>
      <!-- Menu Desktop -->
      <nav class="hidden md:flex space-x-8">
        <a href="/" class="hover:text-blue-300 transition">Início</a>
        <a href="/#servicos" class="hover:text-blue-300 transition">Serviços</a>
        <a href="/#planos" class="hover:text-blue-300 transition">Planos</a>
        <a href="/#scanner" class="hover:text-blue-300 transition">Scanner</a>
        <a href="#" class="text-blue-400 font-semibold">Gerador de Álibis</a>
      </nav>
    </div>
  </header>

  <!-- Conteúdo principal com margem para o cabeçalho fixo -->
  <main class="pt-20 pb-10">
    <div class="max-w-5xl mx-auto px-6">
      <h1 class="text-4xl font-bold text-center mb-3 text-[#0f172a]">Gerador de Álibis</h1>
      <p class="text-lg text-center mb-12 text-gray-600">Crie conversas falsas para comprovar seu álibi</p>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Painel de controle -->
        <div class="col-span-1 bg-white p-6 rounded-lg shadow-md h-fit">
          <h2 class="text-xl font-bold mb-4 text-[#0f172a]">Configurações</h2>
          
          <div class="space-y-5">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Plataforma</label>
              <select id="platform-select" class="w-full p-2 border border-gray-300 rounded-md">
                <option value="whatsapp">WhatsApp</option>
                <option value="instagram">Instagram</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Contato</label>
              <input type="text" id="contact-name" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Ex: Maria" value="João">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Data</label>
              <input type="date" id="chat-date" class="w-full p-2 border border-gray-300 rounded-md" value="2025-05-09">
            </div>
            
            <hr class="my-4">
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Nova Mensagem</label>
              <div class="flex mb-2">
                <select id="message-type" class="p-2 border border-gray-300 rounded-l-md">
                  <option value="sent">Enviada</option>
                  <option value="received">Recebida</option>
                </select>
                <input type="time" id="message-time" class="p-2 border-l-0 border border-gray-300" value="14:30">
              </div>
              <textarea id="message-text" class="w-full p-2 border border-gray-300 rounded-md mb-2" rows="2" placeholder="Digite sua mensagem..."></textarea>
              <button id="add-message-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md">
                Adicionar Mensagem
              </button>
            </div>
            
            <hr class="my-4">
            
            <div>
              <button id="generate-image-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-md mb-2">
                Gerar Imagem
              </button>
              <button id="reset-conversation-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md">
                Limpar Conversa
              </button>
            </div>
          </div>
        </div>
        
        <!-- Área de Preview -->
        <div class="col-span-2">
          <div id="conversation-container" class="w-full overflow-hidden rounded-lg shadow-lg mb-4">
            <!-- WhatsApp Preview -->
            <div id="whatsapp-preview" class="whatsapp-bg">
              <!-- Cabeçalho WhatsApp -->
              <div class="bg-[#008069] text-white p-3 flex items-center">
                <div class="w-10 h-10 bg-gray-300 rounded-full mr-3"></div>
                <div>
                  <div id="whatsapp-contact-name" class="font-semibold">João</div>
                  <div class="text-xs opacity-75">online</div>
                </div>
              </div>
              
              <!-- Conteúdo da conversa WhatsApp -->
              <div id="whatsapp-messages" class="p-4 min-h-96 flex flex-col">
                <div class="text-center text-xs text-gray-500 my-2" id="whatsapp-date">HOJE</div>
                
                <!-- Mensagens de exemplo -->
                <div class="message received">
                  <div>Oi, tudo bem?</div>
                  <div class="message-time">14:22</div>
                </div>
                
                <div class="message sent">
                  <div>Tudo ótimo! Estou no evento como combinamos.</div>
                  <div class="message-time">14:25</div>
                </div>
                
                <div class="message received">
                  <div>Que bom! Estou te esperando aqui na entrada</div>
                  <div class="message-time">14:28</div>
                </div>
              </div>
            </div>
            
            <!-- Instagram Preview (inicialmente escondido) -->
            <div id="instagram-preview" class="instagram-chat hidden">
              <!-- Cabeçalho Instagram -->
              <div class="instagram-header bg-white p-3 flex items-center">
                <div class="w-8 h-8 bg-gradient-to-tr from-yellow-400 to-pink-600 rounded-full mr-3"></div>
                <div id="instagram-contact-name" class="font-semibold">João</div>
              </div>
              
              <!-- Conteúdo da conversa Instagram -->
              <div id="instagram-messages" class="p-4 min-h-96 flex flex-col bg-white">
                <div class="text-center text-xs text-gray-500 my-2" id="instagram-date">09/05/2025</div>
                
                <!-- Mensagens de exemplo -->
                <div class="instagram-message received">
                  <div>Oi! Vamos ao cinema hoje?</div>
                </div>
                
                <div class="instagram-message sent">
                  <div>Claro! Estou no shopping agora</div>
                </div>
                
                <div class="instagram-message received">
                  <div>Perfeito! Te encontro na entrada em 10 minutos</div>
                </div>
              </div>
            </div>
          </div>
          
          <div id="image-output" class="hidden">
            <div class="bg-white p-4 rounded-lg shadow-md mb-4">
              <h3 class="text-lg font-bold mb-2 text-[#0f172a]">Imagem Gerada</h3>
              <div class="border border-gray-300 rounded-lg p-2 flex items-center justify-center">
                <img id="generated-image" class="max-w-full max-h-[500px]">
              </div>
            </div>
            
            <div class="flex space-x-4">
              <button id="download-image-btn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md disabled:opacity-50">
                Baixar Imagem
              </button>
              <button id="back-to-editor-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-md">
                Voltar ao Editor
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Rodapé -->
  <footer class="bg-[#0f172a] text-white py-10">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <div class="font-bold text-2xl mb-2">Álibi Digital</div>
          <p class="text-gray-400 max-w-md">Transformando o futuro com tecnologia de ponta em análise emocional e gerenciamento de álibis.</p>
        </div>
        
        <div>
          <div class="text-sm text-gray-400">© 2025 Álibi Digital. Todos os direitos reservados.</div>
        </div>
      </div>
    </div>
  </footer>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Elementos do DOM
      const platformSelect = document.getElementById('platform-select');
      const contactNameInput = document.getElementById('contact-name');
      const chatDateInput = document.getElementById('chat-date');
      const messageTypeSelect = document.getElementById('message-type');
      const messageTimeInput = document.getElementById('message-time');
      const messageTextInput = document.getElementById('message-text');
      const addMessageBtn = document.getElementById('add-message-btn');
      const generateImageBtn = document.getElementById('generate-image-btn');
      const resetConversationBtn = document.getElementById('reset-conversation-btn');
      const downloadImageBtn = document.getElementById('download-image-btn');
      const backToEditorBtn = document.getElementById('back-to-editor-btn');
      
      const whatsappPreview = document.getElementById('whatsapp-preview');
      const instagramPreview = document.getElementById('instagram-preview');
      const whatsappMessages = document.getElementById('whatsapp-messages');
      const instagramMessages = document.getElementById('instagram-messages');
      const whatsappContactName = document.getElementById('whatsapp-contact-name');
      const instagramContactName = document.getElementById('instagram-contact-name');
      const whatsappDate = document.getElementById('whatsapp-date');
      const instagramDate = document.getElementById('instagram-date');
      
      const conversationContainer = document.getElementById('conversation-container');
      const imageOutput = document.getElementById('image-output');
      const generatedImage = document.getElementById('generated-image');
      
      // Atualizar plataforma de visualização
      platformSelect.addEventListener('change', () => {
        if (platformSelect.value === 'whatsapp') {
          whatsappPreview.classList.remove('hidden');
          instagramPreview.classList.add('hidden');
        } else {
          whatsappPreview.classList.add('hidden');
          instagramPreview.classList.remove('hidden');
        }
      });
      
      // Atualizar nome do contato
      contactNameInput.addEventListener('input', () => {
        const name = contactNameInput.value || 'Contato';
        whatsappContactName.textContent = name;
        instagramContactName.textContent = name;
      });
      
      // Atualizar data
      chatDateInput.addEventListener('change', () => {
        const date = new Date(chatDateInput.value);
        const formattedDate = new Intl.DateTimeFormat('pt-BR', {
          day: '2-digit',
          month: '2-digit',
          year: 'numeric'
        }).format(date);
        
        whatsappDate.textContent = formattedDate;
        instagramDate.textContent = formattedDate;
      });
      
      // Adicionar mensagem
      addMessageBtn.addEventListener('click', () => {
        const type = messageTypeSelect.value;
        const time = messageTimeInput.value;
        const text = messageTextInput.value.trim();
        
        if (!text) return;
        
        // Formatar hora para 24h
        const timeParts = time.split(':');
        const formattedTime = `${timeParts[0]}:${timeParts[1]}`;
        
        // Adicionar no WhatsApp
        const whatsappMsg = document.createElement('div');
        whatsappMsg.className = `message ${type}`;
        whatsappMsg.innerHTML = `
          <div>${text}</div>
          <div class="message-time">${formattedTime}</div>
        `;
        whatsappMessages.appendChild(whatsappMsg);
        
        // Adicionar no Instagram
        const instaMsg = document.createElement('div');
        instaMsg.className = `instagram-message ${type}`;
        instaMsg.innerHTML = `<div>${text}</div>`;
        instagramMessages.appendChild(instaMsg);
        
        // Limpar campo
        messageTextInput.value = '';
      });
      
      // Gerar imagem
      generateImageBtn.addEventListener('click', () => {
        // Determinar qual preview está visível
        const targetPreview = platformSelect.value === 'whatsapp' ? whatsappPreview : instagramPreview;
        
        // Capturar como imagem usando html2canvas
        html2canvas(targetPreview).then(canvas => {
          // Converter para URL de dados
          const imageUrl = canvas.toDataURL('image/png');
          
          // Mostrar a imagem gerada
          generatedImage.src = imageUrl;
          conversationContainer.classList.add('hidden');
          imageOutput.classList.remove('hidden');
          
          // Habilitar botão de download
          downloadImageBtn.disabled = false;
          downloadImageBtn.onclick = () => {
            const a = document.createElement('a');
            a.href = imageUrl;
            a.download = `alibi-${platformSelect.value}-${Date.now()}.png`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          };
        });
      });
      
      // Voltar ao editor
      backToEditorBtn.addEventListener('click', () => {
        conversationContainer.classList.remove('hidden');
        imageOutput.classList.add('hidden');
      });
      
      // Limpar conversa
      resetConversationBtn.addEventListener('click', () => {
        // Remover todas as mensagens, exceto a data
        const dateDivWA = whatsappDate.parentElement.cloneNode(true);
        const dateDivIG = instagramDate.parentElement.cloneNode(true);
        
        whatsappMessages.innerHTML = '';
        instagramMessages.innerHTML = '';
        
        whatsappMessages.appendChild(dateDivWA);
        instagramMessages.appendChild(dateDivIG);
      });
      
      // Inicializar data
      const today = new Date();
      const formattedDate = new Intl.DateTimeFormat('pt-BR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      }).format(today);
      
      whatsappDate.textContent = formattedDate;
      instagramDate.textContent = formattedDate;
    });
  </script>
</body>
</html>